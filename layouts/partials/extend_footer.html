{{- /* Custom JavaScript for enhanced technical blog functionality */ -}}
<script>
  // Enhanced code copy functionality
  document.addEventListener("DOMContentLoaded", function () {
    // Add copy buttons to code blocks
    const codeBlocks = document.querySelectorAll(".highlight");
    codeBlocks.forEach(function (codeBlock) {
      const copyButton = document.createElement("button");
      copyButton.className = "copy-button";
      copyButton.textContent = "Copy";
      copyButton.style.position = "absolute";
      copyButton.style.top = "0.5rem";
      copyButton.style.right = "0.5rem";

      codeBlock.style.position = "relative";
      codeBlock.appendChild(copyButton);

      copyButton.addEventListener("click", function () {
        const code = codeBlock.querySelector("code");
        const text = code.textContent;

        navigator.clipboard
          .writeText(text)
          .then(function () {
            copyButton.textContent = "Copied!";
            setTimeout(function () {
              copyButton.textContent = "Copy";
            }, 2000);
          })
          .catch(function () {
            // Fallback for older browsers
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand("copy");
            document.body.removeChild(textArea);

            copyButton.textContent = "Copied!";
            setTimeout(function () {
              copyButton.textContent = "Copy";
            }, 2000);
          });
      });
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        if (target) {
          target.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      });
    });

    // Enhanced table responsiveness
    const tables = document.querySelectorAll(".post-content table");
    tables.forEach((table) => {
      const wrapper = document.createElement("div");
      wrapper.style.overflowX = "auto";
      wrapper.style.margin = "1rem 0";
      table.parentNode.insertBefore(wrapper, table);
      wrapper.appendChild(table);
    });
  });

  // Performance optimization: lazy load images
  if ("IntersectionObserver" in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src;
          img.classList.remove("lazy");
          imageObserver.unobserve(img);
        }
      });
    });

    document.querySelectorAll("img[data-src]").forEach((img) => {
      imageObserver.observe(img);
    });
  }
</script>

{{- /* Additional analytics or tracking code can be added here */ -}}
